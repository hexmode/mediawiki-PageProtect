= PageProtect =

This is MediaWiki extension to allow you to grant grops grant add control of the “read” right on a per-group basis to a page.

== Installation ==

* Download and place the files in a directory called PageProtect in your extensions/ folder.

* Add the following code at the bottom of your <tt>LocalSettings.php</tt>:

<source lang="php">
wfLoadExtension( 'PageProtect' );
</source>

* Configure as required

* Done - Navigate to Special:Version on your wiki to verify that the extension is successfully installed.

== Configuration ==

=== ini file ===

You need to specify connection parameters for your LDAP server.  Since you may want to use a different LDAP server for different environments (e.g. dev, prod), the credentials are stored in a separate file in [https://en.wikipedia.org/wiki/INI_file#Format ini file format].  These will be used to connect to the directory server.  Specify the ini file in your <tt>LocalSettings.php</tt> file by setting:
<source lang="php">
$PageProtectIniFile = "full-path-to-file";
</source>

The file takes the following format:
<source lang="ini">
[main]
	server = ServerName

	; quotes are required to keep php from getting confused about
	; the extra equals sign
	user = 'UserName or DN'

	pass = password

	basedn = 'Base DN'
</source>

=== Group mapping ===

Your mapping of MediaWiki groups to the distinguished names (dn) of the groups on your directory server should be provided in the $PageProtectMap variable.  For example:

<source lang="php">
$PageProtectMap
    = [ "AWSUsers" =>
        [
            "cn=aws-production,ou=security group,o=top"
        ],
        "NavAndGuidance" =>
        [
            'cn=g001,OU=Groups,o=top',
            'cn=g002,OU=Groups,o=top',
            'cn=g003,OU=Groups,o=top',
        ]
    ];
</source>

== TODO ==

I also plan to have a Special Page to set up to allow for group mappings soon.

